<html>
  <body bgcolor=black>
	
<center>
<img height=70% src="" id="myImageA" onclick="bigA()"/><br><br>
<img height=10% src="" id="myImageB" onclick="bigB()"/><br><br>
<img height=10% src="" id="myImageC" onclick="bigC()"/>
</center>

<script>

  var loadingFlags=[ 0, 0, 0 ];

  function doneLoading(i) {
	  loadingFlags[i] = 0;
  }

  function resetLoadingFlags() {
	  loadingFlags[0] =  1;
	  loadingFlags[1] =  1;
	  loadingFlags[2] =  1;
  }
  
  
  
  var urlA = "http://192.168.88.230:88/cgi-bin/CGIProxy.fcgi?cmd=snapPicture2&usr=admin&pwd="
  var urlB = "http://192.168.88.231:88/cgi-bin/CGIProxy.fcgi?cmd=snapPicture2&usr=admin&pwd="
  var urlC = "http://192.168.88.232:88/cgi-bin/CGIProxy.fcgi?cmd=snapPicture2&usr=admin&pwd="
  
  var myImageElementA = document.getElementById('myImageA');
  myImageElementA.onload = function() { doneLoading(0) };
  myImageElementA.src = urlA + '&rand=' + Math.random();
  
  var myImageElementB = document.getElementById('myImageB');
  myImageElementB.onload = function() { doneLoading(1) };
  myImageElementB.src = urlB + '&rand=' + Math.random();
  
  
  var myImageElementC = document.getElementById('myImageC');
  myImageElementC.onload = function() { doneLoading(2) };
  myImageElementC.src = urlC + '&rand=' + Math.random();
  


  function periodicReload() {
	  // note that we must wait until the last reload is complete before
	  // changing the img src URLs again and triggering a new reload

	  // If we just run this on a timer every 500 ms, and the reloads take
	  // longer than that, they seem to pile up.  The images update
	  // erratically in the browser in that case.
	  
	  if ( loadingFlags[0] || loadingFlags[1] || loadingFlags[2] ) {
		  // wait longer
		  setTimeout( periodicReload, 50 );
		  return;
	  }
	  
	  resetLoadingFlags();
	  
	  var myImageElementA = document.getElementById('myImageA');
      myImageElementA.src = urlA + '&rand=' + Math.random();
	  
      var myImageElementB = document.getElementById('myImageB');
      myImageElementB.src = urlB + '&rand=' + Math.random();
	  
	  var myImageElementC = document.getElementById('myImageC');
      myImageElementC.src = urlC + '&rand=' + Math.random();
	  
	  setTimeout( periodicReload, 500 );
  }
  
  setTimeout( periodicReload, 500 );



  function pickBig( highA, highB, highC ) {
	  var myImageElementA = document.getElementById('myImageA');
	  myImageElementA.style.height=highA;
	  var myImageElementB = document.getElementById('myImageB');
	  myImageElementB.style.height=highB;
	  var myImageElementC = document.getElementById('myImageC');
	  myImageElementC.style.height=highC;
  }


  function bigA() {
	  pickBig( "70%", "10%", "10%" );
  }
  function bigB() {
	  pickBig( "10%", "70%", "10%" );
  }
  function bigC() {
	  pickBig( "10%", "10%", "70%" );
  }


  document.onkeydown = function( evt ) {
      //evt = evt || window.event;
      if( evt.keyCode == 49 ) {
		  bigA();
	  }
	  else if( evt.keyCode == 50 ) {
		  bigB();
	  }
	  else if( evt.keyCode == 51 ) {
		  bigC();
	  }
  };

</script>


  </body>

  </html>
